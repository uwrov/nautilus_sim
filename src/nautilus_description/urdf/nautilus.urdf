<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from nautilus.urdf.xacro            | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="nautilus">
  <!-- Begin defining the ROV -->
  <link name="body">
    <inertial>
      <origin rpy="0.0 0.0 0.0" xyz="0.0 -.135 0.0"/>
      <!-- TOOD: get a better mass estimate -->
      <mass value="21.576"/>
      <inertia ixx="0.083" ixy="0.0" ixz="0.0" iyy="0.083" iyz="0.0" izz="0.0"/>
    </inertial>
    <collision name="body">
      <origin xyz="0.0 -.135 0.0"/>
      <geometry>
        <box size="0.29 0.31 0.24"/>
      </geometry>
    </collision>
    <visual name="body">
      <geometry>
        <mesh filename="model://nautilus/meshes/nautilus.dae"/>
      </geometry>
    </visual>
  </link>
  <link name="motor_A">
    <inertial>
      <mass value="0.1658760921095411"/>
      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
    </inertial>
    <collision name="motor_A">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </collision>
    <visual name="motor_A">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </visual>
  </link>
  <joint name="motor_A_joint" type="fixed">
    <origin rpy="1.5707963267948966 0.0 -0.7853981633974483" xyz="0.16 -0.34 -0.02"/>
    <parent link="body"/>
    <child link="motor_A"/>
  </joint>
  <link name="motor_B">
    <inertial>
      <mass value="0.1658760921095411"/>
      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
    </inertial>
    <collision name="motor_B">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </collision>
    <visual name="motor_B">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </visual>
  </link>
  <joint name="motor_B_joint" type="fixed">
    <origin rpy="1.5707963267948966 0.0 0.7853981633974483" xyz="-0.16 -0.34 -0.02"/>
    <parent link="body"/>
    <child link="motor_B"/>
  </joint>
  <link name="motor_C">
    <inertial>
      <mass value="0.1658760921095411"/>
      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
    </inertial>
    <collision name="motor_C">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </collision>
    <visual name="motor_C">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </visual>
  </link>
  <joint name="motor_C_joint" type="fixed">
    <origin rpy="1.5707963267948966 0.0 0.7853981633974483" xyz="0.16 0.07 -0.02"/>
    <parent link="body"/>
    <child link="motor_C"/>
  </joint>
  <link name="motor_D">
    <inertial>
      <mass value="0.1658760921095411"/>
      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
    </inertial>
    <collision name="motor_D">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </collision>
    <visual name="motor_D">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </visual>
  </link>
  <joint name="motor_D_joint" type="fixed">
    <origin rpy="1.5707963267948966 0.0 -0.7853981633974483" xyz="-0.16 0.07 -0.02"/>
    <parent link="body"/>
    <child link="motor_D"/>
  </joint>
  <link name="motor_E">
    <inertial>
      <mass value="0.1658760921095411"/>
      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
    </inertial>
    <collision name="motor_E">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </collision>
    <visual name="motor_E">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </visual>
  </link>
  <joint name="motor_E_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.165 -0.135 -0.02"/>
    <parent link="body"/>
    <child link="motor_E"/>
  </joint>
  <link name="motor_F">
    <inertial>
      <mass value="0.1658760921095411"/>
      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
    </inertial>
    <collision name="motor_F">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </collision>
    <visual name="motor_F">
      <geometry>
        <cylinder length="0.033" radius="0.04"/>
      </geometry>
    </visual>
  </link>
  <joint name="motor_F_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="-0.165 -0.135 -0.02"/>
    <parent link="body"/>
    <child link="motor_F"/>
  </joint>
  <link name="camera1">
    <inertial>
      <mass value="0.12500000000000003"/>
      <inertia ixx="1e-4" ixy="0.0" ixz="0.0" iyy="1e-4" iyz="0.0" izz="1e-4"/>
    </inertial>
    <visual name="camera1">
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </visual>
    <collision name="camera1">
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="camera1_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.0 -0.32 0.0"/>
    <parent link="body"/>
    <child link="camera1"/>
  </joint>
  <link name="camera2">
    <inertial>
      <mass value="0.12500000000000003"/>
      <inertia ixx="1e-4" ixy="0.0" ixz="0.0" iyy="1e-4" iyz="0.0" izz="1e-4"/>
    </inertial>
    <visual name="camera2">
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </visual>
    <collision name="camera2">
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="camera2_joint" type="fixed">
    <origin rpy="0.0 0.0 0.0" xyz="0.0 -0.2 -0.125"/>
    <parent link="body"/>
    <child link="camera2"/>
  </joint>
  <!-- Sensor Definitions -->
  <gazebo>
    <plugin filename="libgazebo_ros_imu.so" name="imu_plugin">
      <alwaysOn>true</alwaysOn>
      <bodyName>body</bodyName>
      <topicName>imu</topicName>
      <serviceName>imu_service</serviceName>
      <gaussianNoise>0.0</gaussianNoise>
      <updateRate>20.0</updateRate>
    </plugin>
  </gazebo>
  <!-- Bouyancy Plugin -->
  <gazebo>
    <plugin filename="libBuoyancyPlugin.so" name="BuoyancyPlugin">
      <fluid_density>1000</fluid_density>
      <link name="body">
        <!-- TODO: calculate volume of ROV -->
        <!-- TODO: provide center of mass -->
        <volume>0.021576</volume>
        <!-- <volume>0.05</volume> -->
        <center_of_volume>0 -.135 0</center_of_volume>
      </link>
    </plugin>
  </gazebo>
  <!-- Thrusters -->
  <gazebo reference="motor_A_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="motor_B_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="motor_C_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="motor_D_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="motor_E_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="motor_F_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo>
    <plugin filename="libthruster.so" name="thruster"/>
  </gazebo>
  <!-- Cameras -->
  <gazebo reference="camera1">
    <sensor name="camera1" type="camera">
      <update_rate>30</update_rate>
      <always_on>true</always_on>
      <camera name="front">
        <horizontal_fov>1.39626</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>10.0</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <always_on>true</always_on>
        <update_rate>30</update_rate>
        <cameraName>nautilus/camera1</cameraName>
        <imageTopicName>/nautilus/camera1/image_raw</imageTopicName>
        <cameraInfoTopicName>/nautilus/camera1/camera_info</cameraInfoTopicName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="camera1_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
  <gazebo reference="camera2">
    <sensor name="camera2" type="camera">
      <update_rate>30</update_rate>
      <always_on>true</always_on>
      <camera name="front">
        <horizontal_fov>1.39626</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>10.0</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="camera_controller">
        <always_on>true</always_on>
        <update_rate>30</update_rate>
        <visualize>true</visualize>
        <cameraName>nautilus/camera2</cameraName>
        <imageTopicName>/nautilus/camera2/image_raw</imageTopicName>
        <cameraInfoTopicName>/nautilus/camera2/camera_info</cameraInfoTopicName>
      </plugin>
    </sensor>
    <selfCollide>false</selfCollide>
  </gazebo>
  <gazebo reference="camera2_joint">
    <preserveFixedJoint>true</preserveFixedJoint>
  </gazebo>
</robot>

